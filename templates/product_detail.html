{% extends 'base.html' %}

{% block content %}

{% include 'partials/breadcrumbs.html' with category=product.category product=product %}

<div style="display:flex; gap:20px; flex-wrap: wrap;">

    <!-- Product Image -->
    <div style="flex:1; min-width:300px;">
        <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width:100%;">
    </div>

    <!-- Product Details -->
    <div style="flex:1; min-width:300px;">
        <h2>{{ product.name }}</h2>
        <p><strong>Price:</strong> ${{ product.price }}</p>
        <p>{{ product.description }}</p>
        <p><strong>Stock:</strong> {{ product.stock }}</p>

        {% if product.stock > 0 %}
        <form action="{% url 'add_to_cart' product.id %}" method="post">
            {% csrf_token %}
            <button type="submit">Add to Cart</button>
        </form>
        {% else %}
        <p style="color:red; font-weight:bold;">Out of Stock</p>
        {% endif %}
    </div>
</div>

<hr>

<!-- Featured / Related Products -->
{% if featured_products %}
<h3>Related Products</h3>
<div style="display:flex; gap:10px; flex-wrap: wrap;">
    {% for fp in featured_products %}
    <div style="border:1px solid #ccc; padding:10px; width:150px; text-align:center;">
        <a href="{% url 'product_detail' fp.slug %}">
            <img src="{{ fp.image.url }}" alt="{{ fp.name }}" style="width:100px; height:100px; object-fit:cover;">
            <p>{{ fp.name }}</p>
        </a>
        <p>${{ fp.price }}</p>
    </div>
    {% endfor %}
</div>
{% endif %}

<hr>



   <!-- NEW ARRIVALS -->
        {% if latest_products %}
        <div style="margin-top:25px;">
            <h3 style="border-bottom:2px solid #333; padding-bottom:5px;">
                New Arrivals
            </h3>

            <div style="display:flex; flex-direction:row; gap:10px; margin-top:10px;">
                {% for lp in latest_products %}
                <a href="{% url 'product_detail' lp.slug %}"
                   style="display:flex; gap:10px; align-items:center; text-decoration:none; color:#333;">

                    <img src="{{ lp.image.url }}"
                         style="width:55px; height:55px; object-fit:cover; border-radius:5px;">

                    <div>
                        <strong style="display:block;">{{ lp.name }}</strong>
                        <span style="font-size:13px;">${{ lp.price }}</span>
                    </div>

                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}



<a href="{% url 'home' %}">‚Üê Back to Products</a>

{% endblock %}
